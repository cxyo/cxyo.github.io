## 所需设备清单

### 核心组件
1. **ESP32单片机**（已有）- 主控制器
2. **24V电磁阀**（已有）- 控制进水
3. **水位传感器** - 关键检测元件
4. **继电器模块** - 连接ESP32和电磁阀
5. **电源模块** - 为系统供电

### 详细设备说明

#### 1. 水位传感器（选择一种）
- **浮球开关**：机械式，简单可靠，价格便宜
  - 需要2个：低水位开关、高水位开关
- **光电水位传感器**：非接触式，寿命长
- **超声波传感器**：安装方便，精度高

#### 2. 继电器模块
- **5V继电器模块**（带光耦隔离）
- 作用：用ESP32的5V信号控制24V电磁阀
- 推荐：单路或双路继电器模块

#### 3. 电源系统
- **24V电源适配器** - 为电磁阀供电
- **DC-DC降压模块** - 将24V降为5V为ESP32供电
- 或使用单独的5V电源为ESP32供电

#### 4. 其他配件
- **水管接头** - 连接水龙头和电磁阀
- **防水盒** - 保护电子元件
- **导线、接线端子**
- **保险丝** - 安全保护

## 系统连接方案

```
水龙头 → 电磁阀 → 水箱
                    ↑
                水位传感器 → ESP32 → 继电器 → 电磁阀
```

## 电路连接示意图

```
24V电源 → 继电器常开触点 → 电磁阀 → GND
         ↑
    继电器控制端 ← ESP32 GPIO引脚

水位传感器 → ESP32 GPIO引脚
```

## 控制逻辑代码框架

```cpp
// 定义引脚
const int lowLevelPin = 2;    // 低水位传感器引脚
const int highLevelPin = 3;   // 高水位传感器引脚  
const int relayPin = 4;       // 继电器控制引脚

void setup() {
  pinMode(lowLevelPin, INPUT);
  pinMode(highLevelPin, INPUT);
  pinMode(relayPin, OUTPUT);
  digitalWrite(relayPin, LOW); // 初始关闭电磁阀
}

void loop() {
  bool lowLevel = digitalRead(lowLevelPin);   // 低水位检测
  bool highLevel = digitalRead(highLevelPin); // 高水位检测
  
  if (lowLevel == LOW) {  // 到达低水位
    digitalWrite(relayPin, HIGH); // 打开电磁阀加水
  }
  
  if (highLevel == HIGH) { // 到达高水位
    digitalWrite(relayPin, LOW);  // 关闭电磁阀停止加水
  }
  
  delay(1000); // 1秒检测一次
}
```

## 安装注意事项

1. **水位传感器安装**：低水位传感器安装在需要开始加水的位置，高水位传感器安装在停止加水的位置
2. **电磁阀安装**：注意水流方向，通常有箭头标识
3. **防水处理**：所有电子接口做好防水密封
4. **安全接地**：确保系统良好接地

## 预算估算
- 水位传感器：20-50元
- 继电器模块：5-15元  
- 电源模块：20-40元
- 配件：30-50元
- **总计约：75-155元**
